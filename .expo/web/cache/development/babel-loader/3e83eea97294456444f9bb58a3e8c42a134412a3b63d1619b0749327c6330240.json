{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nvar _excluded = [\"renderItem\", \"extraData\"];\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport React, { useRef } from \"react\";\nimport { useDraggableFlatListContext } from \"../context/draggableFlatListContext\";\nimport { useRefs } from \"../context/refContext\";\nimport { useStableCallback } from \"../hooks/useStableCallback\";\nimport { typedMemo } from \"../utils\";\nfunction RowItem(props) {\n  var propsRef = useRef(props);\n  propsRef.current = props;\n  var _useDraggableFlatList = useDraggableFlatListContext(),\n    activeKey = _useDraggableFlatList.activeKey;\n  var activeKeyRef = useRef(activeKey);\n  activeKeyRef.current = activeKey;\n  var _useRefs = useRefs(),\n    keyToIndexRef = _useRefs.keyToIndexRef;\n  var drag = useStableCallback(function () {\n    var _propsRef$current = propsRef.current,\n      drag = _propsRef$current.drag,\n      itemKey = _propsRef$current.itemKey,\n      debug = _propsRef$current.debug;\n    if (activeKeyRef.current) {\n      if (debug) console.log(\"## attempt to drag item while another item is already active, noop\");\n    }\n    drag(itemKey);\n  });\n  var renderItem = props.renderItem,\n    item = props.item,\n    itemKey = props.itemKey,\n    extraData = props.extraData;\n  var getIndex = useStableCallback(function () {\n    return keyToIndexRef.current.get(itemKey);\n  });\n  return React.createElement(MemoizedInner, {\n    isActive: activeKey === itemKey,\n    drag: drag,\n    renderItem: renderItem,\n    item: item,\n    getIndex: getIndex,\n    extraData: extraData\n  });\n}\nexport default typedMemo(RowItem);\nfunction Inner(_ref) {\n  var renderItem = _ref.renderItem,\n    extraData = _ref.extraData,\n    rest = _objectWithoutProperties(_ref, _excluded);\n  return renderItem(_objectSpread({}, rest));\n}\nvar MemoizedInner = typedMemo(Inner);","map":{"version":3,"names":["React","useRef","useDraggableFlatListContext","useRefs","useStableCallback","typedMemo","RowItem","props","propsRef","current","_useDraggableFlatList","activeKey","activeKeyRef","_useRefs","keyToIndexRef","drag","_propsRef$current","itemKey","debug","console","log","renderItem","item","extraData","getIndex","get","createElement","MemoizedInner","isActive","Inner","_ref","rest","_objectWithoutProperties","_excluded","_objectSpread"],"sources":["/Users/big/Appinbox-projects/SailAI/node_modules/react-native-draggable-flatlist/lib/module/components/RowItem.tsx"],"sourcesContent":["import React, { useRef } from \"react\";\nimport { useDraggableFlatListContext } from \"../context/draggableFlatListContext\";\nimport { useRefs } from \"../context/refContext\";\nimport { useStableCallback } from \"../hooks/useStableCallback\";\nimport { RenderItem } from \"../types\";\nimport { typedMemo } from \"../utils\";\n\ntype Props<T> = {\n  extraData?: any;\n  drag: (itemKey: string) => void;\n  item: T;\n  renderItem: RenderItem<T>;\n  itemKey: string;\n  debug?: boolean;\n};\n\nfunction RowItem<T>(props: Props<T>) {\n  const propsRef = useRef(props);\n  propsRef.current = props;\n\n  const { activeKey } = useDraggableFlatListContext();\n  const activeKeyRef = useRef(activeKey);\n  activeKeyRef.current = activeKey;\n  const { keyToIndexRef } = useRefs();\n\n  const drag = useStableCallback(() => {\n    const { drag, itemKey, debug } = propsRef.current;\n    if (activeKeyRef.current) {\n      // already dragging an item, noop\n      if (debug)\n        console.log(\n          \"## attempt to drag item while another item is already active, noop\"\n        );\n    }\n    drag(itemKey);\n  });\n\n  const { renderItem, item, itemKey, extraData } = props;\n\n  const getIndex = useStableCallback(() => {\n    return keyToIndexRef.current.get(itemKey);\n  });\n\n  return (\n    <MemoizedInner\n      isActive={activeKey === itemKey}\n      drag={drag}\n      renderItem={renderItem}\n      item={item}\n      getIndex={getIndex}\n      extraData={extraData}\n    />\n  );\n}\n\nexport default typedMemo(RowItem);\n\ntype InnerProps<T> = {\n  isActive: boolean;\n  item: T;\n  getIndex: () => number | undefined;\n  drag: () => void;\n  renderItem: RenderItem<T>;\n  extraData?: any;\n};\n\nfunction Inner<T>({ renderItem, extraData, ...rest }: InnerProps<T>) {\n  return renderItem({ ...rest }) as JSX.Element;\n}\n\nconst MemoizedInner = typedMemo(Inner);\n"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAAgBC,MAAhB,QAA8B,OAA9B;AACA,SAASC,2BAAT;AACA,SAASC,OAAT;AACA,SAASC,iBAAT;AAEA,SAASC,SAAT;AAWA,SAASC,OAATA,CAAoBC,KAApB,EAAqC;EACnC,IAAMC,QAAQ,GAAGP,MAAM,CAACM,KAAD,CAAvB;EACAC,QAAQ,CAACC,OAAT,GAAmBF,KAAnB;EAEA,IAAAG,qBAAA,GAAsBR,2BAA2B,EAAjD;IAAQS,SAAA,GAAAD,qBAAA,CAAAC,SAAA;EACR,IAAMC,YAAY,GAAGX,MAAM,CAACU,SAAD,CAA3B;EACAC,YAAY,CAACH,OAAb,GAAuBE,SAAvB;EACA,IAAAE,QAAA,GAA0BV,OAAO,EAAjC;IAAQW,aAAA,GAAAD,QAAA,CAAAC,aAAA;EAER,IAAMC,IAAI,GAAGX,iBAAiB,CAAC,YAAM;IACnC,IAAAY,iBAAA,GAAiCR,QAAQ,CAACC,OAA1C;MAAQM,IAAF,GAAAC,iBAAA,CAAED,IAAF;MAAQE,OAAR,GAAAD,iBAAA,CAAQC,OAAR;MAAiBC,KAAA,GAAAF,iBAAA,CAAAE,KAAA;IACvB,IAAIN,YAAY,CAACH,OAAjB,EAA0B;MAExB,IAAIS,KAAJ,EACEC,OAAO,CAACC,GAAR,CACE,oEADF;IAGH;IACDL,IAAI,CAACE,OAAD,CAAJ;EACD,CAV6B,CAA9B;EAYA,IAAQI,UAAF,GAA2Cd,KAAjD,CAAQc,UAAF;IAAcC,IAAd,GAA2Cf,KAAjD,CAAoBe,IAAd;IAAoBL,OAApB,GAA2CV,KAAjD,CAA0BU,OAApB;IAA6BM,SAAA,GAAchB,KAAjD,CAAmCgB,SAAA;EAEnC,IAAMC,QAAQ,GAAGpB,iBAAiB,CAAC,YAAM;IACvC,OAAOU,aAAa,CAACL,OAAd,CAAsBgB,GAAtB,CAA0BR,OAA1B,CAAP;EACD,CAFiC,CAAlC;EAIA,OACEjB,KAAA,CAAA0B,aAAA,CAACC,aAAD;IACEC,QAAQ,EAAEjB,SAAS,KAAKM,OAD1B;IAEEF,IAAI,EAAEA,IAFR;IAGEM,UAAU,EAAEA,UAHd;IAIEC,IAAI,EAAEA,IAJR;IAKEE,QAAQ,EAAEA,QALZ;IAMED,SAAS,EAAEA;EANb,EADF;AAUD;AAED,eAAelB,SAAS,CAACC,OAAD,CAAxB;AAWA,SAASuB,KAATA,CAAAC,IAAA,EAAqE;EAAA,IAAjDT,UAAF,GAAmDS,IAAA,CAAjDT,UAAF;IAAcE,SAAd,GAAmDO,IAAA,CAArCP,SAAd;IAA4BQ,IAAA,GAAAC,wBAAA,CAAuBF,IAAA,EAAAG,SAAA;EACnE,OAAOZ,UAAU,CAAAa,aAAA,KAAMH,IAAA,CAAN,CAAjB;AACD;AAED,IAAMJ,aAAa,GAAGtB,SAAS,CAACwB,KAAD,CAA/B"},"metadata":{},"sourceType":"module","externalDependencies":[]}