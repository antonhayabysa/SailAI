{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\nimport React, { useRef, useState } from \"react\";\nimport findNodeHandle from \"react-native-web/dist/exports/findNodeHandle\";\nimport LogBox from \"react-native-web/dist/exports/LogBox\";\nimport { useDerivedValue, useSharedValue } from \"react-native-reanimated\";\nimport DraggableFlatList from \"../components/DraggableFlatList\";\nimport { useSafeNestableScrollContainerContext } from \"../context/nestableScrollContainerContext\";\nimport { useNestedAutoScroll } from \"../hooks/useNestedAutoScroll\";\nimport { useStableCallback } from \"../hooks/useStableCallback\";\nvar _worklet_1394427284036_init_data = {\n  code: \"function anonymous() {\\n  const {\\n    listHoverOffset,\\n    listVerticalOffset\\n  } = this._closure;\\n  return listHoverOffset.value + listVerticalOffset.value;\\n}\",\n  location: \"/Users/big/Appinbox-projects/SailAI/node_modules/react-native-draggable-flatlist/lib/module/components/NestableDraggableFlatList.js\",\n  sourceMap: \"{\\\"version\\\":3,\\\"names\\\":[\\\"anonymous\\\",\\\"listHoverOffset\\\",\\\"listVerticalOffset\\\",\\\"_closure\\\",\\\"value\\\"],\\\"sources\\\":[\\\"/Users/big/Appinbox-projects/SailAI/node_modules/react-native-draggable-flatlist/lib/module/components/NestableDraggableFlatList.js\\\"],\\\"mappings\\\":\\\"AA8BsC,SAAAA,SAAMA,CAAA;EAAA;IAAAC,eAAA;IAAAC;EAAA,SAAAC,QAAA;EACxC,OAAOF,eAAe,CAACG,KAAK,GAAGF,kBAAkB,CAACE,KAAK;AACzD\\\"}\"\n};\nfunction NestableDraggableFlatListInner(props, ref) {\n  var hasSuppressedWarnings = useRef(false);\n  if (!hasSuppressedWarnings.current) {\n    LogBox.ignoreLogs([\"VirtualizedLists should never be nested inside plain ScrollViews with the same orientation because it can break windowing\"]);\n    console.reportErrorsAsExceptions = false;\n    hasSuppressedWarnings.current = true;\n  }\n  var _useSafeNestableScrol = useSafeNestableScrollContainerContext(),\n    scrollableRef = _useSafeNestableScrol.scrollableRef,\n    outerScrollOffset = _useSafeNestableScrol.outerScrollOffset,\n    setOuterScrollEnabled = _useSafeNestableScrol.setOuterScrollEnabled;\n  var listVerticalOffset = useSharedValue(0);\n  var _useState = useState({}),\n    _useState2 = _slicedToArray(_useState, 2),\n    animVals = _useState2[0],\n    setAnimVals = _useState2[1];\n  var defaultHoverOffset = useSharedValue(0);\n  var _useState3 = useState(defaultHoverOffset),\n    _useState4 = _slicedToArray(_useState3, 2),\n    listHoverOffset = _useState4[0],\n    setListHoverOffset = _useState4[1];\n  var hoverOffset = useDerivedValue(function () {\n    var _e = [new global.Error(), -3, -27];\n    var _f = function _f() {\n      return listHoverOffset.value + listVerticalOffset.value;\n    };\n    _f._closure = {\n      listHoverOffset: listHoverOffset,\n      listVerticalOffset: listVerticalOffset\n    };\n    _f.__initData = _worklet_1394427284036_init_data;\n    _f.__workletHash = 1394427284036;\n    _f.__stackDetails = _e;\n    _f.__version = \"3.3.0\";\n    return _f;\n  }(), [listHoverOffset]);\n  useNestedAutoScroll(_objectSpread(_objectSpread({}, animVals), {}, {\n    hoverOffset: hoverOffset\n  }));\n  var onListContainerLayout = useStableCallback(function () {\n    var _ref2 = _asyncToGenerator(function* (_ref) {\n      var containerRef = _ref.containerRef;\n      var nodeHandle = findNodeHandle(scrollableRef.current);\n      var onSuccess = function onSuccess(_x, y) {\n        listVerticalOffset.value = y;\n      };\n      var onFail = function onFail() {\n        console.log(\"## nested draggable list measure fail\");\n      };\n      containerRef.current.measureLayout(nodeHandle, onSuccess, onFail);\n    });\n    return function (_x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }());\n  var onDragBegin = useStableCallback(function (params) {\n    var _props$onDragBegin;\n    setOuterScrollEnabled(false);\n    (_props$onDragBegin = props.onDragBegin) === null || _props$onDragBegin === void 0 ? void 0 : _props$onDragBegin.call(props, params);\n  });\n  var onDragEnd = useStableCallback(function (params) {\n    var _props$onDragEnd;\n    setOuterScrollEnabled(true);\n    (_props$onDragEnd = props.onDragEnd) === null || _props$onDragEnd === void 0 ? void 0 : _props$onDragEnd.call(props, params);\n  });\n  var onAnimValInit = useStableCallback(function (params) {\n    var _props$onAnimValInit;\n    setListHoverOffset(params.hoverOffset);\n    setAnimVals(_objectSpread(_objectSpread({}, params), {}, {\n      hoverOffset: hoverOffset\n    }));\n    (_props$onAnimValInit = props.onAnimValInit) === null || _props$onAnimValInit === void 0 ? void 0 : _props$onAnimValInit.call(props, params);\n  });\n  return React.createElement(DraggableFlatList, _extends({\n    ref: ref,\n    onContainerLayout: onListContainerLayout,\n    activationDistance: props.activationDistance || 20,\n    scrollEnabled: false\n  }, props, {\n    outerScrollOffset: outerScrollOffset,\n    onDragBegin: onDragBegin,\n    onDragEnd: onDragEnd,\n    onAnimValInit: onAnimValInit\n  }));\n}\nexport var NestableDraggableFlatList = React.forwardRef(NestableDraggableFlatListInner);","map":{"version":3,"names":["React","useRef","useState","findNodeHandle","LogBox","useDerivedValue","useSharedValue","DraggableFlatList","useSafeNestableScrollContainerContext","useNestedAutoScroll","useStableCallback","_worklet_1394427284036_init_data","code","location","sourceMap","NestableDraggableFlatListInner","props","ref","hasSuppressedWarnings","current","ignoreLogs","console","reportErrorsAsExceptions","_useSafeNestableScrol","scrollableRef","outerScrollOffset","setOuterScrollEnabled","listVerticalOffset","_useState","_useState2","_slicedToArray","animVals","setAnimVals","defaultHoverOffset","_useState3","_useState4","listHoverOffset","setListHoverOffset","hoverOffset","_e","global","Error","_f","value","_closure","_objectSpread","onListContainerLayout","_ref2","_asyncToGenerator","_ref","containerRef","nodeHandle","onSuccess","_x","y","onFail","log","measureLayout","_x2","apply","arguments","onDragBegin","params","_props$onDragBegin","call","onDragEnd","_props$onDragEnd","onAnimValInit","_props$onAnimValInit","createElement","_extends","onContainerLayout","activationDistance","scrollEnabled","NestableDraggableFlatList","forwardRef"],"sources":["/Users/big/Appinbox-projects/SailAI/node_modules/react-native-draggable-flatlist/lib/module/components/NestableDraggableFlatList.tsx"],"sourcesContent":["import React, { useRef, useState } from \"react\";\nimport { findNodeHandle, LogBox } from \"react-native\";\nimport Animated, {\n  useDerivedValue,\n  useSharedValue,\n} from \"react-native-reanimated\";\nimport { DraggableFlatListProps } from \"../types\";\nimport DraggableFlatList from \"../components/DraggableFlatList\";\nimport { useSafeNestableScrollContainerContext } from \"../context/nestableScrollContainerContext\";\nimport { useNestedAutoScroll } from \"../hooks/useNestedAutoScroll\";\nimport { typedMemo } from \"../utils\";\nimport { useStableCallback } from \"../hooks/useStableCallback\";\nimport { FlatList } from \"react-native-gesture-handler\";\n\nfunction NestableDraggableFlatListInner<T>(\n  props: DraggableFlatListProps<T>,\n  ref?: React.ForwardedRef<FlatList<T>>\n) {\n  const hasSuppressedWarnings = useRef(false);\n\n  if (!hasSuppressedWarnings.current) {\n    LogBox.ignoreLogs([\n      \"VirtualizedLists should never be nested inside plain ScrollViews with the same orientation because it can break windowing\",\n    ]); // Ignore log notification by message\n    //@ts-ignore\n    console.reportErrorsAsExceptions = false;\n    hasSuppressedWarnings.current = true;\n  }\n\n  const {\n    scrollableRef,\n    outerScrollOffset,\n    setOuterScrollEnabled,\n  } = useSafeNestableScrollContainerContext();\n\n  const listVerticalOffset = useSharedValue(0);\n  const [animVals, setAnimVals] = useState({});\n  const defaultHoverOffset = useSharedValue(0);\n  const [listHoverOffset, setListHoverOffset] = useState(defaultHoverOffset);\n\n  const hoverOffset = useDerivedValue(() => {\n    return listHoverOffset.value + listVerticalOffset.value;\n  }, [listHoverOffset]);\n\n  useNestedAutoScroll({\n    ...animVals,\n    hoverOffset,\n  });\n\n  const onListContainerLayout = useStableCallback(async ({ containerRef }) => {\n    const nodeHandle = findNodeHandle(scrollableRef.current);\n\n    const onSuccess = (_x: number, y: number) => {\n      listVerticalOffset.value = y;\n    };\n    const onFail = () => {\n      console.log(\"## nested draggable list measure fail\");\n    };\n    //@ts-ignore\n    containerRef.current.measureLayout(nodeHandle, onSuccess, onFail);\n  });\n\n  const onDragBegin: DraggableFlatListProps<T>[\"onDragBegin\"] = useStableCallback(\n    (params) => {\n      setOuterScrollEnabled(false);\n      props.onDragBegin?.(params);\n    }\n  );\n\n  const onDragEnd: DraggableFlatListProps<T>[\"onDragEnd\"] = useStableCallback(\n    (params) => {\n      setOuterScrollEnabled(true);\n      props.onDragEnd?.(params);\n    }\n  );\n\n  const onAnimValInit: DraggableFlatListProps<T>[\"onAnimValInit\"] = useStableCallback(\n    (params) => {\n      setListHoverOffset(params.hoverOffset);\n      setAnimVals({\n        ...params,\n        hoverOffset,\n      });\n      props.onAnimValInit?.(params);\n    }\n  );\n\n  return (\n    <DraggableFlatList\n      ref={ref}\n      onContainerLayout={onListContainerLayout}\n      activationDistance={props.activationDistance || 20}\n      scrollEnabled={false}\n      {...props}\n      outerScrollOffset={outerScrollOffset}\n      onDragBegin={onDragBegin}\n      onDragEnd={onDragEnd}\n      onAnimValInit={onAnimValInit}\n    />\n  );\n}\n\n// Generic forwarded ref type assertion taken from:\n// https://fettblog.eu/typescript-react-generic-forward-refs/#option-1%3A-type-assertion\nexport const NestableDraggableFlatList = React.forwardRef(\n  NestableDraggableFlatListInner\n) as <T>(\n  props: DraggableFlatListProps<T> & { ref?: React.ForwardedRef<FlatList<T>> }\n) => ReturnType<typeof NestableDraggableFlatListInner>;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}