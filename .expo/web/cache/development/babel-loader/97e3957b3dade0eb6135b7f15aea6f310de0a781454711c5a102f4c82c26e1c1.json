{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\nimport React, { useCallback, useEffect, useLayoutEffect, useMemo, useRef, useState } from \"react\";\nimport { FlatList, Gesture, GestureDetector } from \"react-native-gesture-handler\";\nimport Animated, { runOnJS, useAnimatedReaction, useAnimatedScrollHandler, useSharedValue, withSpring } from \"react-native-reanimated\";\nimport CellRendererComponent from \"./CellRendererComponent\";\nimport { DEFAULT_PROPS } from \"../constants\";\nimport PlaceholderItem from \"./PlaceholderItem\";\nimport RowItem from \"./RowItem\";\nimport PropsProvider from \"../context/propsContext\";\nimport AnimatedValueProvider, { useAnimatedValues } from \"../context/animatedValueContext\";\nimport RefProvider, { useRefs } from \"../context/refContext\";\nimport DraggableFlatListProvider from \"../context/draggableFlatListContext\";\nimport { useAutoScroll } from \"../hooks/useAutoScroll\";\nimport { useStableCallback } from \"../hooks/useStableCallback\";\nimport ScrollOffsetListener from \"./ScrollOffsetListener\";\nimport { typedMemo } from \"../utils\";\nvar AnimatedFlatList = Animated.createAnimatedComponent(FlatList);\nvar _worklet_1078075929388_init_data = {\n  code: \"function anonymous() {\\n  const {\\n    isTouchActiveNative\\n  } = this._closure;\\n  return isTouchActiveNative.value;\\n}\",\n  location: \"/Users/big/Appinbox-projects/SailAI/node_modules/react-native-draggable-flatlist/lib/module/components/DraggableFlatList.js\",\n  sourceMap: \"{\\\"version\\\":3,\\\"names\\\":[\\\"anonymous\\\",\\\"isTouchActiveNative\\\",\\\"_closure\\\",\\\"value\\\"],\\\"sources\\\":[\\\"/Users/big/Appinbox-projects/SailAI/node_modules/react-native-draggable-flatlist/lib/module/components/DraggableFlatList.js\\\"],\\\"mappings\\\":\\\"AAqNsB,SAAAA,SAAMA,CAAA;EAAA;IAAAC;EAAA,SAAAC,QAAA;EACxB,OAAOD,mBAAmB,CAACE,KAAK;AAClC\\\"}\"\n};\nvar _worklet_16273937982620_init_data = {\n  code: \"function anonymous(cur, prev) {\\n  const {\\n    touchTranslate,\\n    activeIndexAnim,\\n    disabled,\\n    runOnJS,\\n    onRelease,\\n    onDragEnd,\\n    spacerIndexAnim\\n  } = this._closure;\\n  if (cur !== prev && !cur) {\\n    const hasMoved = !!touchTranslate.value;\\n    if (!hasMoved && activeIndexAnim.value >= 0 && !disabled.value) {\\n      runOnJS(onRelease)(activeIndexAnim.value);\\n      runOnJS(onDragEnd)({\\n        from: activeIndexAnim.value,\\n        to: spacerIndexAnim.value\\n      });\\n    }\\n  }\\n}\",\n  location: \"/Users/big/Appinbox-projects/SailAI/node_modules/react-native-draggable-flatlist/lib/module/components/DraggableFlatList.js\",\n  sourceMap: \"{\\\"version\\\":3,\\\"names\\\":[\\\"anonymous\\\",\\\"cur\\\",\\\"prev\\\",\\\"touchTranslate\\\",\\\"activeIndexAnim\\\",\\\"disabled\\\",\\\"runOnJS\\\",\\\"onRelease\\\",\\\"onDragEnd\\\",\\\"spacerIndexAnim\\\",\\\"_closure\\\",\\\"hasMoved\\\",\\\"value\\\",\\\"from\\\",\\\"to\\\"],\\\"sources\\\":[\\\"/Users/big/Appinbox-projects/SailAI/node_modules/react-native-draggable-flatlist/lib/module/components/DraggableFlatList.js\\\"],\\\"mappings\\\":\\\"AAuNK,SAACA,SAAKA,CAAAC,GAAS,EAAAC,IAAA;EAAA;IAAAC,cAAA;IAAAC,eAAA;IAAAC,QAAA;IAAAC,OAAA;IAAAC,SAAA;IAAAC,SAAA;IAAAC;EAAA,SAAAC,QAAA;EAChB,IAAIT,GAAG,KAAKC,IAAI,IAAI,CAACD,GAAG,EAAE;IACxB,MAAMU,QAAQ,GAAG,CAAC,CAACR,cAAc,CAACS,KAAK;IAEvC,IAAI,CAACD,QAAQ,IAAIP,eAAe,CAACQ,KAAK,IAAI,CAAC,IAAI,CAACP,QAAQ,CAACO,KAAK,EAAE;MAC9DN,OAAO,CAACC,SAAS,CAAC,CAACH,eAAe,CAACQ,KAAK,CAAC;MACzCN,OAAO,CAACE,SAAS,CAAC,CAAC;QACjBK,IAAI,EAAET,eAAe,CAACQ,KAAK;QAC3BE,EAAE,EAAEL,eAAe,CAACG;MACtB,CAAC,CAAC;IACJ;EACF;AACF\\\"}\"\n};\nvar _worklet_5609833063596_init_data = {\n  code: \"function anonymous() {\\n  const {\\n    spacerIndexAnim\\n  } = this._closure;\\n  return spacerIndexAnim.value;\\n}\",\n  location: \"/Users/big/Appinbox-projects/SailAI/node_modules/react-native-draggable-flatlist/lib/module/components/DraggableFlatList.js\",\n  sourceMap: \"{\\\"version\\\":3,\\\"names\\\":[\\\"anonymous\\\",\\\"spacerIndexAnim\\\",\\\"_closure\\\",\\\"value\\\"],\\\"sources\\\":[\\\"/Users/big/Appinbox-projects/SailAI/node_modules/react-native-draggable-flatlist/lib/module/components/DraggableFlatList.js\\\"],\\\"mappings\\\":\\\"AAoOsB,SAAAA,SAAMA,CAAA;EAAA;IAAAC;EAAA,SAAAC,QAAA;EACxB,OAAOD,eAAe,CAACE,KAAK;AAC9B\\\"}\"\n};\nvar _worklet_14437607148282_init_data = {\n  code: \"function anonymous(cur, prev) {\\n  const {\\n    runOnJS,\\n    onPlaceholderIndexChange\\n  } = this._closure;\\n  if (prev !== null && cur !== prev && cur >= 0 && prev >= 0) {\\n    runOnJS(onPlaceholderIndexChange)(cur);\\n  }\\n}\",\n  location: \"/Users/big/Appinbox-projects/SailAI/node_modules/react-native-draggable-flatlist/lib/module/components/DraggableFlatList.js\",\n  sourceMap: \"{\\\"version\\\":3,\\\"names\\\":[\\\"anonymous\\\",\\\"cur\\\",\\\"prev\\\",\\\"runOnJS\\\",\\\"onPlaceholderIndexChange\\\",\\\"_closure\\\"],\\\"sources\\\":[\\\"/Users/big/Appinbox-projects/SailAI/node_modules/react-native-draggable-flatlist/lib/module/components/DraggableFlatList.js\\\"],\\\"mappings\\\":\\\"AAsOK,SAACA,SAAKA,CAAAC,GAAS,EAAAC,IAAA;EAAA;IAAAC,OAAA;IAAAC;EAAA,SAAAC,QAAA;EAChB,IAAIH,IAAI,KAAK,IAAI,IAAID,GAAG,KAAKC,IAAI,IAAID,GAAG,IAAI,CAAC,IAAIC,IAAI,IAAI,CAAC,EAAE;IAC1DC,OAAO,CAACC,wBAAwB,CAAC,CAACH,GAAG,CAAC;EACxC;AACF\\\"}\"\n};\nvar _worklet_15397689585801_init_data = {\n  code: \"function anonymous(evt) {\\n  const {\\n    gestureDisabled,\\n    disabled,\\n    panGestureState\\n  } = this._closure;\\n  gestureDisabled.value = disabled.value;\\n  if (gestureDisabled.value) return;\\n  panGestureState.value = evt.state;\\n}\",\n  location: \"/Users/big/Appinbox-projects/SailAI/node_modules/react-native-draggable-flatlist/lib/module/components/DraggableFlatList.js\",\n  sourceMap: \"{\\\"version\\\":3,\\\"names\\\":[\\\"anonymous\\\",\\\"evt\\\",\\\"gestureDisabled\\\",\\\"disabled\\\",\\\"panGestureState\\\",\\\"_closure\\\",\\\"value\\\",\\\"state\\\"],\\\"sources\\\":[\\\"/Users/big/Appinbox-projects/SailAI/node_modules/react-native-draggable-flatlist/lib/module/components/DraggableFlatList.js\\\"],\\\"mappings\\\":\\\"AA4O2C,SAAAA,SAAOA,CAAAC,GAAA;EAAA;IAAAC,eAAA;IAAAC,QAAA;IAAAC;EAAA,SAAAC,QAAA;EAC9CH,eAAe,CAACI,KAAK,GAAGH,QAAQ,CAACG,KAAK;EACtC,IAAIJ,eAAe,CAACI,KAAK,EAAE;EAC3BF,eAAe,CAACE,KAAK,GAAGL,GAAG,CAACM,KAAK;AACnC\\\"}\"\n};\nvar _worklet_12302949829429_init_data = {\n  code: \"function anonymous(evt) {\\n  const {\\n    gestureDisabled,\\n    panGestureState,\\n    horizontalAnim,\\n    touchTranslate\\n  } = this._closure;\\n  if (gestureDisabled.value) return;\\n  panGestureState.value = evt.state;\\n  const translation = horizontalAnim.value ? evt.translationX : evt.translationY;\\n  touchTranslate.value = translation;\\n}\",\n  location: \"/Users/big/Appinbox-projects/SailAI/node_modules/react-native-draggable-flatlist/lib/module/components/DraggableFlatList.js\",\n  sourceMap: \"{\\\"version\\\":3,\\\"names\\\":[\\\"anonymous\\\",\\\"evt\\\",\\\"gestureDisabled\\\",\\\"panGestureState\\\",\\\"horizontalAnim\\\",\\\"touchTranslate\\\",\\\"_closure\\\",\\\"value\\\",\\\"state\\\",\\\"translation\\\",\\\"translationX\\\",\\\"translationY\\\"],\\\"sources\\\":[\\\"/Users/big/Appinbox-projects/SailAI/node_modules/react-native-draggable-flatlist/lib/module/components/DraggableFlatList.js\\\"],\\\"mappings\\\":\\\"AAgPc,SAAAA,SAAOA,CAAAC,GAAA;EAAA;IAAAC,eAAA;IAAAC,eAAA;IAAAC,cAAA;IAAAC;EAAA,SAAAC,QAAA;EACjB,IAAIJ,eAAe,CAACK,KAAK,EAAE;EAC3BJ,eAAe,CAACI,KAAK,GAAGN,GAAG,CAACO,KAAK;EACjC,MAAMC,WAAW,GAAGL,cAAc,CAACG,KAAK,GAAGN,GAAG,CAACS,YAAY,GAAGT,GAAG,CAACU,YAAY;EAC9EN,cAAc,CAACE,KAAK,GAAGE,WAAW;AACpC\\\"}\"\n};\nvar _worklet_92494558414_init_data = {\n  code: \"function anonymous(evt) {\\n  const {\\n    gestureDisabled,\\n    isTouchActiveNative,\\n    horizontalAnim,\\n    touchTranslate,\\n    autoScrollDistance,\\n    panGestureState,\\n    activeIndexAnim,\\n    disabled,\\n    runOnJS,\\n    onRelease,\\n    placeholderOffset,\\n    activeCellOffset,\\n    withSpring,\\n    animationConfigRef,\\n    onDragEnd,\\n    spacerIndexAnim\\n  } = this._closure;\\n  if (gestureDisabled.value) return;\\n  isTouchActiveNative.value = false;\\n  const translation = horizontalAnim.value ? evt.translationX : evt.translationY;\\n  touchTranslate.value = translation + autoScrollDistance.value;\\n  panGestureState.value = evt.state;\\n  if (activeIndexAnim.value === -1 || disabled.value) return;\\n  disabled.value = true;\\n  runOnJS(onRelease)(activeIndexAnim.value);\\n  const springTo = placeholderOffset.value - activeCellOffset.value;\\n  touchTranslate.value = withSpring(springTo, animationConfigRef.current, function () {\\n    runOnJS(onDragEnd)({\\n      from: activeIndexAnim.value,\\n      to: spacerIndexAnim.value\\n    });\\n    disabled.value = false;\\n  });\\n}\",\n  location: \"/Users/big/Appinbox-projects/SailAI/node_modules/react-native-draggable-flatlist/lib/module/components/DraggableFlatList.js\",\n  sourceMap: \"{\\\"version\\\":3,\\\"names\\\":[\\\"anonymous\\\",\\\"evt\\\",\\\"gestureDisabled\\\",\\\"isTouchActiveNative\\\",\\\"horizontalAnim\\\",\\\"touchTranslate\\\",\\\"autoScrollDistance\\\",\\\"panGestureState\\\",\\\"activeIndexAnim\\\",\\\"disabled\\\",\\\"runOnJS\\\",\\\"onRelease\\\",\\\"placeholderOffset\\\",\\\"activeCellOffset\\\",\\\"withSpring\\\",\\\"animationConfigRef\\\",\\\"onDragEnd\\\",\\\"spacerIndexAnim\\\",\\\"_closure\\\",\\\"value\\\",\\\"translation\\\",\\\"translationX\\\",\\\"translationY\\\",\\\"state\\\",\\\"springTo\\\",\\\"current\\\",\\\"from\\\",\\\"to\\\"],\\\"sources\\\":[\\\"/Users/big/Appinbox-projects/SailAI/node_modules/react-native-draggable-flatlist/lib/module/components/DraggableFlatList.js\\\"],\\\"mappings\\\":\\\"AAqPW,SAAAA,SAAOA,CAAAC,GAAA;EAAA;IAAAC,eAAA;IAAAC,mBAAA;IAAAC,cAAA;IAAAC,cAAA;IAAAC,kBAAA;IAAAC,eAAA;IAAAC,eAAA;IAAAC,QAAA;IAAAC,OAAA;IAAAC,SAAA;IAAAC,iBAAA;IAAAC,gBAAA;IAAAC,UAAA;IAAAC,kBAAA;IAAAC,SAAA;IAAAC;EAAA,SAAAC,QAAA;EACd,IAAIhB,eAAe,CAACiB,KAAK,EAAE;EAE3BhB,mBAAmB,CAACgB,KAAK,GAAG,KAAK;EACjC,MAAMC,WAAW,GAAGhB,cAAc,CAACe,KAAK,GAAGlB,GAAG,CAACoB,YAAY,GAAGpB,GAAG,CAACqB,YAAY;EAC9EjB,cAAc,CAACc,KAAK,GAAGC,WAAW,GAAGd,kBAAkB,CAACa,KAAK;EAC7DZ,eAAe,CAACY,KAAK,GAAGlB,GAAG,CAACsB,KAAK;EAEjC,IAAIf,eAAe,CAACW,KAAK,KAAK,CAAC,CAAC,IAAIV,QAAQ,CAACU,KAAK,EAAE;EACpDV,QAAQ,CAACU,KAAK,GAAG,IAAI;EACrBT,OAAO,CAACC,SAAS,CAAC,CAACH,eAAe,CAACW,KAAK,CAAC;EACzC,MAAMK,QAAQ,GAAGZ,iBAAiB,CAACO,KAAK,GAAGN,gBAAgB,CAACM,KAAK;EACjEd,cAAc,CAACc,KAAK,GAAGL,UAAU,CAACU,QAAQ,EAAET,kBAAkB,CAACU,OAAO,EAAE,YAAM;IAC5Ef,OAAO,CAACM,SAAS,CAAC,CAAC;MACjBU,IAAI,EAAElB,eAAe,CAACW,KAAK;MAC3BQ,EAAE,EAAEV,eAAe,CAACE;IACtB,CAAC,CAAC;IACFV,QAAQ,CAACU,KAAK,GAAG,KAAK;EACxB,CAAC,CAAC;AACJ\\\"}\"\n};\nvar _worklet_3590858606522_init_data = {\n  code: \"function anonymous() {\\n  const {\\n    runOnJS,\\n    onDragEnd,\\n    activeIndexAnim,\\n    spacerIndexAnim,\\n    disabled\\n  } = this._closure;\\n  runOnJS(onDragEnd)({\\n    from: activeIndexAnim.value,\\n    to: spacerIndexAnim.value\\n  });\\n  disabled.value = false;\\n}\",\n  location: \"/Users/big/Appinbox-projects/SailAI/node_modules/react-native-draggable-flatlist/lib/module/components/DraggableFlatList.js\",\n  sourceMap: \"{\\\"version\\\":3,\\\"names\\\":[\\\"anonymous\\\",\\\"runOnJS\\\",\\\"onDragEnd\\\",\\\"activeIndexAnim\\\",\\\"spacerIndexAnim\\\",\\\"disabled\\\",\\\"_closure\\\",\\\"from\\\",\\\"value\\\",\\\"to\\\"],\\\"sources\\\":[\\\"/Users/big/Appinbox-projects/SailAI/node_modules/react-native-draggable-flatlist/lib/module/components/DraggableFlatList.js\\\"],\\\"mappings\\\":\\\"AAiQ4E,SAAAA,SAAMA,CAAA;EAAA;IAAAC,OAAA;IAAAC,SAAA;IAAAC,eAAA;IAAAC,eAAA;IAAAC;EAAA,SAAAC,QAAA;EAC5EL,OAAO,CAACC,SAAS,CAAC,CAAC;IACjBK,IAAI,EAAEJ,eAAe,CAACK,KAAK;IAC3BC,EAAE,EAAEL,eAAe,CAACI;EACtB,CAAC,CAAC;EACFH,QAAQ,CAACG,KAAK,GAAG,KAAK;AACxB\\\"}\"\n};\nvar _worklet_13108184529829_init_data = {\n  code: \"function anonymous() {\\n  const {\\n    runOnJS,\\n    onContainerTouchStart\\n  } = this._closure;\\n  runOnJS(onContainerTouchStart)();\\n}\",\n  location: \"/Users/big/Appinbox-projects/SailAI/node_modules/react-native-draggable-flatlist/lib/module/components/DraggableFlatList.js\",\n  sourceMap: \"{\\\"version\\\":3,\\\"names\\\":[\\\"anonymous\\\",\\\"runOnJS\\\",\\\"onContainerTouchStart\\\",\\\"_closure\\\"],\\\"sources\\\":[\\\"/Users/big/Appinbox-projects/SailAI/node_modules/react-native-draggable-flatlist/lib/module/components/DraggableFlatList.js\\\"],\\\"mappings\\\":\\\"AAwQmB,SAAAA,SAAMA,CAAA;EAAA;IAAAC,OAAA;IAAAC;EAAA,SAAAC,QAAA;EACrBF,OAAO,CAACC,qBAAqB,CAAC,CAAC,CAAC;AAClC\\\"}\"\n};\nvar _worklet_2336152451397_init_data = {\n  code: \"function anonymous() {\\n  const {\\n    runOnJS,\\n    onContainerTouchEnd\\n  } = this._closure;\\n  runOnJS(onContainerTouchEnd)();\\n}\",\n  location: \"/Users/big/Appinbox-projects/SailAI/node_modules/react-native-draggable-flatlist/lib/module/components/DraggableFlatList.js\",\n  sourceMap: \"{\\\"version\\\":3,\\\"names\\\":[\\\"anonymous\\\",\\\"runOnJS\\\",\\\"onContainerTouchEnd\\\",\\\"_closure\\\"],\\\"sources\\\":[\\\"/Users/big/Appinbox-projects/SailAI/node_modules/react-native-draggable-flatlist/lib/module/components/DraggableFlatList.js\\\"],\\\"mappings\\\":\\\"AA0QiB,SAAAA,SAAMA,CAAA;EAAA;IAAAC,OAAA;IAAAC;EAAA,SAAAC,QAAA;EAGnBF,OAAO,CAACC,mBAAmB,CAAC,CAAC,CAAC;AAChC\\\"}\"\n};\nvar _worklet_11404908581775_init_data = {\n  code: \"function anonymous(evt) {\\n  const {\\n    scrollOffset,\\n    horizontalAnim,\\n    runOnJS,\\n    onScroll\\n  } = this._closure;\\n  scrollOffset.value = horizontalAnim.value ? evt.contentOffset.x : evt.contentOffset.y;\\n  runOnJS(onScroll)(scrollOffset.value);\\n}\",\n  location: \"/Users/big/Appinbox-projects/SailAI/node_modules/react-native-draggable-flatlist/lib/module/components/DraggableFlatList.js\",\n  sourceMap: \"{\\\"version\\\":3,\\\"names\\\":[\\\"anonymous\\\",\\\"evt\\\",\\\"scrollOffset\\\",\\\"horizontalAnim\\\",\\\"runOnJS\\\",\\\"onScroll\\\",\\\"_closure\\\",\\\"value\\\",\\\"contentOffset\\\",\\\"x\\\",\\\"y\\\"],\\\"sources\\\":[\\\"/Users/big/Appinbox-projects/SailAI/node_modules/react-native-draggable-flatlist/lib/module/components/DraggableFlatList.js\\\"],\\\"mappings\\\":\\\"AAiSc,SAAAA,SAAOA,CAAAC,GAAA;EAAA;IAAAC,YAAA;IAAAC,cAAA;IAAAC,OAAA;IAAAC;EAAA,SAAAC,QAAA;EACfJ,YAAY,CAACK,KAAK,GAAGJ,cAAc,CAACI,KAAK,GAAGN,GAAG,CAACO,aAAa,CAACC,CAAC,GAAGR,GAAG,CAACO,aAAa,CAACE,CAAC;EACrFN,OAAO,CAACC,QAAQ,CAAC,CAACH,YAAY,CAACK,KAAK,CAAC;AACvC\\\"}\"\n};\nfunction DraggableFlatListInner(props) {\n  var _useRefs = useRefs(),\n    cellDataRef = _useRefs.cellDataRef,\n    containerRef = _useRefs.containerRef,\n    flatlistRef = _useRefs.flatlistRef,\n    keyToIndexRef = _useRefs.keyToIndexRef,\n    propsRef = _useRefs.propsRef,\n    animationConfigRef = _useRefs.animationConfigRef;\n  var _useAnimatedValues = useAnimatedValues(),\n    activeCellOffset = _useAnimatedValues.activeCellOffset,\n    activeCellSize = _useAnimatedValues.activeCellSize,\n    activeIndexAnim = _useAnimatedValues.activeIndexAnim,\n    containerSize = _useAnimatedValues.containerSize,\n    scrollOffset = _useAnimatedValues.scrollOffset,\n    scrollViewSize = _useAnimatedValues.scrollViewSize,\n    spacerIndexAnim = _useAnimatedValues.spacerIndexAnim,\n    horizontalAnim = _useAnimatedValues.horizontalAnim,\n    placeholderOffset = _useAnimatedValues.placeholderOffset,\n    touchTranslate = _useAnimatedValues.touchTranslate,\n    autoScrollDistance = _useAnimatedValues.autoScrollDistance,\n    panGestureState = _useAnimatedValues.panGestureState,\n    isTouchActiveNative = _useAnimatedValues.isTouchActiveNative,\n    viewableIndexMin = _useAnimatedValues.viewableIndexMin,\n    viewableIndexMax = _useAnimatedValues.viewableIndexMax,\n    disabled = _useAnimatedValues.disabled;\n  var reset = useStableCallback(function () {\n    activeIndexAnim.value = -1;\n    spacerIndexAnim.value = -1;\n    touchTranslate.value = 0;\n    activeCellSize.value = -1;\n    activeCellOffset.value = -1;\n    setActiveKey(null);\n  });\n  var _props$dragHitSlop = props.dragHitSlop,\n    dragHitSlop = _props$dragHitSlop === void 0 ? DEFAULT_PROPS.dragHitSlop : _props$dragHitSlop,\n    _props$scrollEnabled = props.scrollEnabled,\n    scrollEnabled = _props$scrollEnabled === void 0 ? DEFAULT_PROPS.scrollEnabled : _props$scrollEnabled,\n    _props$activationDist = props.activationDistance,\n    activationDistanceProp = _props$activationDist === void 0 ? DEFAULT_PROPS.activationDistance : _props$activationDist;\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    activeKey = _useState2[0],\n    setActiveKey = _useState2[1];\n  var _useState3 = useState(!propsRef.current.enableLayoutAnimationExperimental),\n    _useState4 = _slicedToArray(_useState3, 2),\n    layoutAnimationDisabled = _useState4[0],\n    setLayoutAnimationDisabled = _useState4[1];\n  var keyExtractor = useStableCallback(function (item, index) {\n    if (!props.keyExtractor) {\n      throw new Error(\"You must provide a keyExtractor to DraggableFlatList\");\n    }\n    return props.keyExtractor(item, index);\n  });\n  var dataRef = useRef(props.data);\n  var dataHasChanged = dataRef.current.map(keyExtractor).join(\"\") !== props.data.map(keyExtractor).join(\"\");\n  dataRef.current = props.data;\n  if (dataHasChanged) {\n    activeKey = null;\n  }\n  useEffect(function () {\n    if (!propsRef.current.enableLayoutAnimationExperimental) return;\n    if (activeKey) {\n      setLayoutAnimationDisabled(true);\n    } else {\n      setTimeout(function () {\n        setLayoutAnimationDisabled(false);\n      }, 100);\n    }\n  }, [activeKey]);\n  useLayoutEffect(function () {\n    props.data.forEach(function (d, i) {\n      var key = keyExtractor(d, i);\n      keyToIndexRef.current.set(key, i);\n    });\n  }, [props.data, keyExtractor, keyToIndexRef]);\n  var drag = useStableCallback(function (activeKey) {\n    if (disabled.value) return;\n    var index = keyToIndexRef.current.get(activeKey);\n    var cellData = cellDataRef.current.get(activeKey);\n    if (cellData) {\n      activeCellOffset.value = cellData.measurements.offset;\n      activeCellSize.value = cellData.measurements.size;\n    }\n    var onDragBegin = propsRef.current.onDragBegin;\n    if (index !== undefined) {\n      spacerIndexAnim.value = index;\n      activeIndexAnim.value = index;\n      setActiveKey(activeKey);\n      onDragBegin === null || onDragBegin === void 0 ? void 0 : onDragBegin(index);\n    }\n  });\n  var onContainerLayout = function onContainerLayout(_ref) {\n    var _props$onContainerLay;\n    var layout = _ref.nativeEvent.layout;\n    var width = layout.width,\n      height = layout.height;\n    containerSize.value = props.horizontal ? width : height;\n    (_props$onContainerLay = props.onContainerLayout) === null || _props$onContainerLay === void 0 ? void 0 : _props$onContainerLay.call(props, {\n      layout: layout,\n      containerRef: containerRef\n    });\n  };\n  var onListContentSizeChange = function onListContentSizeChange(w, h) {\n    var _props$onContentSizeC;\n    scrollViewSize.value = props.horizontal ? w : h;\n    (_props$onContentSizeC = props.onContentSizeChange) === null || _props$onContentSizeC === void 0 ? void 0 : _props$onContentSizeC.call(props, w, h);\n  };\n  var onContainerTouchStart = function onContainerTouchStart() {\n    if (!disabled.value) {\n      isTouchActiveNative.value = true;\n    }\n    return false;\n  };\n  var onContainerTouchEnd = function onContainerTouchEnd() {\n    isTouchActiveNative.value = false;\n  };\n  var extraData = useMemo(function () {\n    return {\n      activeKey: activeKey,\n      extraData: props.extraData\n    };\n  }, [activeKey, props.extraData]);\n  var renderItem = useCallback(function (_ref2) {\n    var item = _ref2.item,\n      index = _ref2.index;\n    var key = keyExtractor(item, index);\n    if (index !== keyToIndexRef.current.get(key)) {\n      keyToIndexRef.current.set(key, index);\n    }\n    return React.createElement(RowItem, {\n      item: item,\n      itemKey: key,\n      renderItem: props.renderItem,\n      drag: drag,\n      extraData: props.extraData\n    });\n  }, [props.renderItem, props.extraData, drag, keyExtractor]);\n  var onRelease = useStableCallback(function (index) {\n    var _props$onRelease;\n    (_props$onRelease = props.onRelease) === null || _props$onRelease === void 0 ? void 0 : _props$onRelease.call(props, index);\n  });\n  var onDragEnd = useStableCallback(function (_ref3) {\n    var from = _ref3.from,\n      to = _ref3.to;\n    var onDragEnd = props.onDragEnd,\n      data = props.data;\n    var newData = _toConsumableArray(data);\n    if (from !== to) {\n      newData.splice(from, 1);\n      newData.splice(to, 0, data[from]);\n    }\n    onDragEnd === null || onDragEnd === void 0 ? void 0 : onDragEnd({\n      from: from,\n      to: to,\n      data: newData\n    });\n    reset();\n  });\n  var onPlaceholderIndexChange = useStableCallback(function (index) {\n    var _props$onPlaceholderI;\n    (_props$onPlaceholderI = props.onPlaceholderIndexChange) === null || _props$onPlaceholderI === void 0 ? void 0 : _props$onPlaceholderI.call(props, index);\n  });\n  useAnimatedReaction(function () {\n    var _e = [new global.Error(), -2, -27];\n    var _f = function _f() {\n      return isTouchActiveNative.value;\n    };\n    _f._closure = {\n      isTouchActiveNative: isTouchActiveNative\n    };\n    _f.__initData = _worklet_1078075929388_init_data;\n    _f.__workletHash = 1078075929388;\n    _f.__stackDetails = _e;\n    _f.__version = \"3.3.0\";\n    return _f;\n  }(), function () {\n    var _e = [new global.Error(), -8, -27];\n    var _f = function _f(cur, prev) {\n      if (cur !== prev && !cur) {\n        var hasMoved = !!touchTranslate.value;\n        if (!hasMoved && activeIndexAnim.value >= 0 && !disabled.value) {\n          runOnJS(onRelease)(activeIndexAnim.value);\n          runOnJS(onDragEnd)({\n            from: activeIndexAnim.value,\n            to: spacerIndexAnim.value\n          });\n        }\n      }\n    };\n    _f._closure = {\n      touchTranslate: touchTranslate,\n      activeIndexAnim: activeIndexAnim,\n      disabled: disabled,\n      runOnJS: runOnJS,\n      onRelease: onRelease,\n      onDragEnd: onDragEnd,\n      spacerIndexAnim: spacerIndexAnim\n    };\n    _f.__initData = _worklet_16273937982620_init_data;\n    _f.__workletHash = 16273937982620;\n    _f.__stackDetails = _e;\n    _f.__version = \"3.3.0\";\n    return _f;\n  }(), [isTouchActiveNative, onDragEnd, onRelease]);\n  useAnimatedReaction(function () {\n    var _e = [new global.Error(), -2, -27];\n    var _f = function _f() {\n      return spacerIndexAnim.value;\n    };\n    _f._closure = {\n      spacerIndexAnim: spacerIndexAnim\n    };\n    _f.__initData = _worklet_5609833063596_init_data;\n    _f.__workletHash = 5609833063596;\n    _f.__stackDetails = _e;\n    _f.__version = \"3.3.0\";\n    return _f;\n  }(), function () {\n    var _e = [new global.Error(), -3, -27];\n    var _f = function _f(cur, prev) {\n      if (prev !== null && cur !== prev && cur >= 0 && prev >= 0) {\n        runOnJS(onPlaceholderIndexChange)(cur);\n      }\n    };\n    _f._closure = {\n      runOnJS: runOnJS,\n      onPlaceholderIndexChange: onPlaceholderIndexChange\n    };\n    _f.__initData = _worklet_14437607148282_init_data;\n    _f.__workletHash = 14437607148282;\n    _f.__stackDetails = _e;\n    _f.__version = \"3.3.0\";\n    return _f;\n  }(), [spacerIndexAnim]);\n  var gestureDisabled = useSharedValue(false);\n  var panGesture = Gesture.Pan().onBegin(function () {\n    var _e = [new global.Error(), -4, -27];\n    var _f = function _f(evt) {\n      gestureDisabled.value = disabled.value;\n      if (gestureDisabled.value) return;\n      panGestureState.value = evt.state;\n    };\n    _f._closure = {\n      gestureDisabled: gestureDisabled,\n      disabled: disabled,\n      panGestureState: panGestureState\n    };\n    _f.__initData = _worklet_15397689585801_init_data;\n    _f.__workletHash = 15397689585801;\n    _f.__stackDetails = _e;\n    _f.__version = \"3.3.0\";\n    return _f;\n  }()).onUpdate(function () {\n    var _e = [new global.Error(), -5, -27];\n    var _f = function _f(evt) {\n      if (gestureDisabled.value) return;\n      panGestureState.value = evt.state;\n      var translation = horizontalAnim.value ? evt.translationX : evt.translationY;\n      touchTranslate.value = translation;\n    };\n    _f._closure = {\n      gestureDisabled: gestureDisabled,\n      panGestureState: panGestureState,\n      horizontalAnim: horizontalAnim,\n      touchTranslate: touchTranslate\n    };\n    _f.__initData = _worklet_12302949829429_init_data;\n    _f.__workletHash = 12302949829429;\n    _f.__stackDetails = _e;\n    _f.__version = \"3.3.0\";\n    return _f;\n  }()).onEnd(function () {\n    var _e = [new global.Error(), -17, -27];\n    var _f = function _f(evt) {\n      if (gestureDisabled.value) return;\n      isTouchActiveNative.value = false;\n      var translation = horizontalAnim.value ? evt.translationX : evt.translationY;\n      touchTranslate.value = translation + autoScrollDistance.value;\n      panGestureState.value = evt.state;\n      if (activeIndexAnim.value === -1 || disabled.value) return;\n      disabled.value = true;\n      runOnJS(onRelease)(activeIndexAnim.value);\n      var springTo = placeholderOffset.value - activeCellOffset.value;\n      touchTranslate.value = withSpring(springTo, animationConfigRef.current, function () {\n        var _e = [new global.Error(), -6, -27];\n        var _f = function _f() {\n          runOnJS(onDragEnd)({\n            from: activeIndexAnim.value,\n            to: spacerIndexAnim.value\n          });\n          disabled.value = false;\n        };\n        _f._closure = {\n          runOnJS: runOnJS,\n          onDragEnd: onDragEnd,\n          activeIndexAnim: activeIndexAnim,\n          spacerIndexAnim: spacerIndexAnim,\n          disabled: disabled\n        };\n        _f.__initData = _worklet_3590858606522_init_data;\n        _f.__workletHash = 3590858606522;\n        _f.__stackDetails = _e;\n        _f.__version = \"3.3.0\";\n        return _f;\n      }());\n    };\n    _f._closure = {\n      gestureDisabled: gestureDisabled,\n      isTouchActiveNative: isTouchActiveNative,\n      horizontalAnim: horizontalAnim,\n      touchTranslate: touchTranslate,\n      autoScrollDistance: autoScrollDistance,\n      panGestureState: panGestureState,\n      activeIndexAnim: activeIndexAnim,\n      disabled: disabled,\n      runOnJS: runOnJS,\n      onRelease: onRelease,\n      placeholderOffset: placeholderOffset,\n      activeCellOffset: activeCellOffset,\n      withSpring: withSpring,\n      animationConfigRef: animationConfigRef,\n      onDragEnd: onDragEnd,\n      spacerIndexAnim: spacerIndexAnim\n    };\n    _f.__initData = _worklet_92494558414_init_data;\n    _f.__workletHash = 92494558414;\n    _f.__stackDetails = _e;\n    _f.__version = \"3.3.0\";\n    return _f;\n  }()).onTouchesDown(function () {\n    var _e = [new global.Error(), -3, -27];\n    var _f = function _f() {\n      runOnJS(onContainerTouchStart)();\n    };\n    _f._closure = {\n      runOnJS: runOnJS,\n      onContainerTouchStart: onContainerTouchStart\n    };\n    _f.__initData = _worklet_13108184529829_init_data;\n    _f.__workletHash = 13108184529829;\n    _f.__stackDetails = _e;\n    _f.__version = \"3.3.0\";\n    return _f;\n  }()).onTouchesUp(function () {\n    var _e = [new global.Error(), -3, -27];\n    var _f = function _f() {\n      runOnJS(onContainerTouchEnd)();\n    };\n    _f._closure = {\n      runOnJS: runOnJS,\n      onContainerTouchEnd: onContainerTouchEnd\n    };\n    _f.__initData = _worklet_2336152451397_init_data;\n    _f.__workletHash = 2336152451397;\n    _f.__stackDetails = _e;\n    _f.__version = \"3.3.0\";\n    return _f;\n  }());\n  if (dragHitSlop) panGesture.hitSlop(dragHitSlop);\n  if (activationDistanceProp) {\n    var activeOffset = [-activationDistanceProp, activationDistanceProp];\n    if (props.horizontal) {\n      panGesture.activeOffsetX(activeOffset);\n    } else {\n      panGesture.activeOffsetY(activeOffset);\n    }\n  }\n  var onScroll = useStableCallback(function (scrollOffset) {\n    var _props$onScrollOffset;\n    (_props$onScrollOffset = props.onScrollOffsetChange) === null || _props$onScrollOffset === void 0 ? void 0 : _props$onScrollOffset.call(props, scrollOffset);\n  });\n  var scrollHandler = useAnimatedScrollHandler({\n    onScroll: function () {\n      var _e = [new global.Error(), -5, -27];\n      var _f = function _f(evt) {\n        scrollOffset.value = horizontalAnim.value ? evt.contentOffset.x : evt.contentOffset.y;\n        runOnJS(onScroll)(scrollOffset.value);\n      };\n      _f._closure = {\n        scrollOffset: scrollOffset,\n        horizontalAnim: horizontalAnim,\n        runOnJS: runOnJS,\n        onScroll: onScroll\n      };\n      _f.__initData = _worklet_11404908581775_init_data;\n      _f.__workletHash = 11404908581775;\n      _f.__stackDetails = _e;\n      _f.__version = \"3.3.0\";\n      return _f;\n    }()\n  }, [horizontalAnim]);\n  useAutoScroll();\n  var onViewableItemsChanged = useStableCallback(function (info) {\n    var _props$onViewableItem;\n    var viewableIndices = info.viewableItems.filter(function (item) {\n      return item.isViewable;\n    }).map(function (item) {\n      return item.index;\n    }).filter(function (index) {\n      return typeof index === \"number\";\n    });\n    var min = Math.min.apply(Math, _toConsumableArray(viewableIndices));\n    var max = Math.max.apply(Math, _toConsumableArray(viewableIndices));\n    viewableIndexMin.value = min;\n    viewableIndexMax.value = max;\n    (_props$onViewableItem = props.onViewableItemsChanged) === null || _props$onViewableItem === void 0 ? void 0 : _props$onViewableItem.call(props, info);\n  });\n  return React.createElement(DraggableFlatListProvider, {\n    activeKey: activeKey,\n    keyExtractor: keyExtractor,\n    horizontal: !!props.horizontal,\n    layoutAnimationDisabled: layoutAnimationDisabled\n  }, React.createElement(GestureDetector, {\n    gesture: panGesture\n  }, React.createElement(Animated.View, {\n    style: props.containerStyle,\n    ref: containerRef,\n    onLayout: onContainerLayout\n  }, props.renderPlaceholder && React.createElement(PlaceholderItem, {\n    renderPlaceholder: props.renderPlaceholder\n  }), React.createElement(AnimatedFlatList, _extends({}, props, {\n    data: props.data,\n    onViewableItemsChanged: onViewableItemsChanged,\n    CellRendererComponent: CellRendererComponent,\n    ref: flatlistRef,\n    onContentSizeChange: onListContentSizeChange,\n    scrollEnabled: !activeKey && scrollEnabled,\n    renderItem: renderItem,\n    extraData: extraData,\n    keyExtractor: keyExtractor,\n    onScroll: scrollHandler,\n    scrollEventThrottle: 16,\n    simultaneousHandlers: props.simultaneousHandlers,\n    removeClippedSubviews: false\n  })), !!props.onScrollOffsetChange && React.createElement(ScrollOffsetListener, {\n    onScrollOffsetChange: props.onScrollOffsetChange,\n    scrollOffset: scrollOffset\n  }))));\n}\nfunction DraggableFlatList(props, ref) {\n  return React.createElement(PropsProvider, props, React.createElement(AnimatedValueProvider, null, React.createElement(RefProvider, {\n    flatListRef: ref\n  }, React.createElement(MemoizedInner, props))));\n}\nvar MemoizedInner = typedMemo(DraggableFlatListInner);\nexport default React.forwardRef(DraggableFlatList);","map":{"version":3,"names":["React","useCallback","useEffect","useLayoutEffect","useMemo","useRef","useState","FlatList","Gesture","GestureDetector","Animated","runOnJS","useAnimatedReaction","useAnimatedScrollHandler","useSharedValue","withSpring","CellRendererComponent","DEFAULT_PROPS","PlaceholderItem","RowItem","PropsProvider","AnimatedValueProvider","useAnimatedValues","RefProvider","useRefs","DraggableFlatListProvider","useAutoScroll","useStableCallback","ScrollOffsetListener","typedMemo","AnimatedFlatList","createAnimatedComponent","_worklet_1078075929388_init_data","code","location","sourceMap","_worklet_16273937982620_init_data","_worklet_5609833063596_init_data","_worklet_14437607148282_init_data","_worklet_15397689585801_init_data","_worklet_12302949829429_init_data","_worklet_92494558414_init_data","_worklet_3590858606522_init_data","_worklet_13108184529829_init_data","_worklet_2336152451397_init_data","_worklet_11404908581775_init_data","DraggableFlatListInner","props","_useRefs","cellDataRef","containerRef","flatlistRef","keyToIndexRef","propsRef","animationConfigRef","_useAnimatedValues","activeCellOffset","activeCellSize","activeIndexAnim","containerSize","scrollOffset","scrollViewSize","spacerIndexAnim","horizontalAnim","placeholderOffset","touchTranslate","autoScrollDistance","panGestureState","isTouchActiveNative","viewableIndexMin","viewableIndexMax","disabled","reset","value","setActiveKey","_props$dragHitSlop","dragHitSlop","_props$scrollEnabled","scrollEnabled","_props$activationDist","activationDistance","activationDistanceProp","_useState","_useState2","_slicedToArray","activeKey","_useState3","current","enableLayoutAnimationExperimental","_useState4","layoutAnimationDisabled","setLayoutAnimationDisabled","keyExtractor","item","index","Error","dataRef","data","dataHasChanged","map","join","setTimeout","forEach","d","i","key","set","drag","get","cellData","measurements","offset","size","onDragBegin","undefined","onContainerLayout","_ref","_props$onContainerLay","layout","nativeEvent","width","height","horizontal","call","onListContentSizeChange","w","h","_props$onContentSizeC","onContentSizeChange","onContainerTouchStart","onContainerTouchEnd","extraData","renderItem","_ref2","createElement","itemKey","onRelease","_props$onRelease","onDragEnd","_ref3","from","to","newData","_toConsumableArray","splice","onPlaceholderIndexChange","_props$onPlaceholderI","_e","global","_f","_closure","cur","prev","hasMoved","__initData","__workletHash","__stackDetails","__version","gestureDisabled","panGesture","Pan","onBegin","evt","state","onUpdate","translation","translationX","translationY","onEnd","springTo","onTouchesDown","onTouchesUp","hitSlop","activeOffset","activeOffsetX","activeOffsetY","onScroll","_props$onScrollOffset","onScrollOffsetChange","scrollHandler","contentOffset","x","y","onViewableItemsChanged","info","_props$onViewableItem","viewableIndices","viewableItems","filter","isViewable","min","Math","apply","max","gesture","View","style","containerStyle","ref","onLayout","renderPlaceholder","_extends","scrollEventThrottle","simultaneousHandlers","removeClippedSubviews","DraggableFlatList","flatListRef","MemoizedInner","forwardRef"],"sources":["/Users/big/Appinbox-projects/SailAI/node_modules/react-native-draggable-flatlist/lib/module/components/DraggableFlatList.tsx"],"sourcesContent":["import React, {\n  useCallback,\n  useEffect,\n  useLayoutEffect,\n  useMemo,\n  useRef,\n  useState,\n} from \"react\";\nimport { ListRenderItem, FlatListProps, LayoutChangeEvent } from \"react-native\";\nimport {\n  FlatList,\n  Gesture,\n  GestureDetector,\n} from \"react-native-gesture-handler\";\nimport Animated, {\n  runOnJS,\n  useAnimatedReaction,\n  useAnimatedScrollHandler,\n  useSharedValue,\n  withSpring,\n} from \"react-native-reanimated\";\nimport CellRendererComponent from \"./CellRendererComponent\";\nimport { DEFAULT_PROPS, isWeb } from \"../constants\";\nimport PlaceholderItem from \"./PlaceholderItem\";\nimport RowItem from \"./RowItem\";\nimport { DraggableFlatListProps } from \"../types\";\nimport PropsProvider from \"../context/propsContext\";\nimport AnimatedValueProvider, {\n  useAnimatedValues,\n} from \"../context/animatedValueContext\";\nimport RefProvider, { useRefs } from \"../context/refContext\";\nimport DraggableFlatListProvider from \"../context/draggableFlatListContext\";\nimport { useAutoScroll } from \"../hooks/useAutoScroll\";\nimport { useStableCallback } from \"../hooks/useStableCallback\";\nimport ScrollOffsetListener from \"./ScrollOffsetListener\";\nimport { typedMemo } from \"../utils\";\n\ntype RNGHFlatListProps<T> = Animated.AnimateProps<\n  FlatListProps<T> & {\n    ref: React.Ref<FlatList<T>>;\n    simultaneousHandlers?: React.Ref<any> | React.Ref<any>[];\n  }\n>;\n\ntype OnViewableItemsChangedCallback<T> = Exclude<\n  FlatListProps<T>[\"onViewableItemsChanged\"],\n  undefined | null\n>;\n\nconst AnimatedFlatList = (Animated.createAnimatedComponent(\n  FlatList\n) as unknown) as <T>(props: RNGHFlatListProps<T>) => React.ReactElement;\n\nfunction DraggableFlatListInner<T>(props: DraggableFlatListProps<T>) {\n  const {\n    cellDataRef,\n    containerRef,\n    flatlistRef,\n    keyToIndexRef,\n    propsRef,\n    animationConfigRef,\n  } = useRefs<T>();\n  const {\n    activeCellOffset,\n    activeCellSize,\n    activeIndexAnim,\n    containerSize,\n    scrollOffset,\n    scrollViewSize,\n    spacerIndexAnim,\n    horizontalAnim,\n    placeholderOffset,\n    touchTranslate,\n    autoScrollDistance,\n    panGestureState,\n    isTouchActiveNative,\n    viewableIndexMin,\n    viewableIndexMax,\n    disabled,\n  } = useAnimatedValues();\n\n  const reset = useStableCallback(() => {\n    activeIndexAnim.value = -1;\n    spacerIndexAnim.value = -1;\n    touchTranslate.value = 0;\n    activeCellSize.value = -1;\n    activeCellOffset.value = -1;\n    setActiveKey(null);\n  });\n\n  const {\n    dragHitSlop = DEFAULT_PROPS.dragHitSlop,\n    scrollEnabled = DEFAULT_PROPS.scrollEnabled,\n    activationDistance: activationDistanceProp = DEFAULT_PROPS.activationDistance,\n  } = props;\n\n  let [activeKey, setActiveKey] = useState<string | null>(null);\n  const [layoutAnimationDisabled, setLayoutAnimationDisabled] = useState(\n    !propsRef.current.enableLayoutAnimationExperimental\n  );\n\n  const keyExtractor = useStableCallback((item: T, index: number) => {\n    if (!props.keyExtractor) {\n      throw new Error(\"You must provide a keyExtractor to DraggableFlatList\");\n    }\n    return props.keyExtractor(item, index);\n  });\n\n  const dataRef = useRef(props.data);\n  const dataHasChanged =\n    dataRef.current.map(keyExtractor).join(\"\") !==\n    props.data.map(keyExtractor).join(\"\");\n  dataRef.current = props.data;\n  if (dataHasChanged) {\n    // When data changes make sure `activeKey` is nulled out in the same render pass\n    activeKey = null;\n  }\n\n  useEffect(() => {\n    if (!propsRef.current.enableLayoutAnimationExperimental) return;\n    if (activeKey) {\n      setLayoutAnimationDisabled(true);\n    } else {\n      // setTimeout result of trial-and-error to determine how long to wait before\n      // re-enabling layout animations so that a drag reorder does not trigger it.\n      setTimeout(() => {\n        setLayoutAnimationDisabled(false);\n      }, 100);\n    }\n  }, [activeKey]);\n\n  useLayoutEffect(() => {\n    props.data.forEach((d, i) => {\n      const key = keyExtractor(d, i);\n      keyToIndexRef.current.set(key, i);\n    });\n  }, [props.data, keyExtractor, keyToIndexRef]);\n\n  const drag = useStableCallback((activeKey: string) => {\n    if (disabled.value) return;\n    const index = keyToIndexRef.current.get(activeKey);\n    const cellData = cellDataRef.current.get(activeKey);\n    if (cellData) {\n      activeCellOffset.value = cellData.measurements.offset;\n      activeCellSize.value = cellData.measurements.size;\n    }\n\n    const { onDragBegin } = propsRef.current;\n    if (index !== undefined) {\n      spacerIndexAnim.value = index;\n      activeIndexAnim.value = index;\n      setActiveKey(activeKey);\n      onDragBegin?.(index);\n    }\n  });\n\n  const onContainerLayout = ({\n    nativeEvent: { layout },\n  }: LayoutChangeEvent) => {\n    const { width, height } = layout;\n    containerSize.value = props.horizontal ? width : height;\n    props.onContainerLayout?.({ layout, containerRef });\n  };\n\n  const onListContentSizeChange = (w: number, h: number) => {\n    scrollViewSize.value = props.horizontal ? w : h;\n    props.onContentSizeChange?.(w, h);\n  };\n\n  const onContainerTouchStart = () => {\n    if (!disabled.value) {\n      isTouchActiveNative.value = true;\n    }\n    return false;\n  };\n\n  const onContainerTouchEnd = () => {\n    isTouchActiveNative.value = false;\n  };\n\n  const extraData = useMemo(\n    () => ({\n      activeKey,\n      extraData: props.extraData,\n    }),\n    [activeKey, props.extraData]\n  );\n\n  const renderItem: ListRenderItem<T> = useCallback(\n    ({ item, index }) => {\n      const key = keyExtractor(item, index);\n      if (index !== keyToIndexRef.current.get(key)) {\n        keyToIndexRef.current.set(key, index);\n      }\n\n      return (\n        <RowItem\n          item={item}\n          itemKey={key}\n          renderItem={props.renderItem}\n          drag={drag}\n          extraData={props.extraData}\n        />\n      );\n    },\n    [props.renderItem, props.extraData, drag, keyExtractor]\n  );\n\n  const onRelease = useStableCallback((index: number) => {\n    props.onRelease?.(index);\n  });\n\n  const onDragEnd = useStableCallback(\n    ({ from, to }: { from: number; to: number }) => {\n      const { onDragEnd, data } = props;\n\n      const newData = [...data];\n      if (from !== to) {\n        newData.splice(from, 1);\n        newData.splice(to, 0, data[from]);\n      }\n\n      onDragEnd?.({ from, to, data: newData });\n      reset();\n    }\n  );\n\n  const onPlaceholderIndexChange = useStableCallback((index: number) => {\n    props.onPlaceholderIndexChange?.(index);\n  });\n\n  // Handle case where user ends drag without moving their finger.\n  useAnimatedReaction(\n    () => {\n      return isTouchActiveNative.value;\n    },\n    (cur, prev) => {\n      if (cur !== prev && !cur) {\n        const hasMoved = !!touchTranslate.value;\n        if (!hasMoved && activeIndexAnim.value >= 0 && !disabled.value) {\n          runOnJS(onRelease)(activeIndexAnim.value);\n          runOnJS(onDragEnd)({\n            from: activeIndexAnim.value,\n            to: spacerIndexAnim.value,\n          });\n        }\n      }\n    },\n    [isTouchActiveNative, onDragEnd, onRelease]\n  );\n\n  useAnimatedReaction(\n    () => {\n      return spacerIndexAnim.value;\n    },\n    (cur, prev) => {\n      if (prev !== null && cur !== prev && cur >= 0 && prev >= 0) {\n        runOnJS(onPlaceholderIndexChange)(cur);\n      }\n    },\n    [spacerIndexAnim]\n  );\n\n  const gestureDisabled = useSharedValue(false);\n\n  const panGesture = Gesture.Pan()\n    .onBegin((evt) => {\n      gestureDisabled.value = disabled.value;\n      if (gestureDisabled.value) return;\n      panGestureState.value = evt.state;\n    })\n    .onUpdate((evt) => {\n      if (gestureDisabled.value) return;\n      panGestureState.value = evt.state;\n      const translation = horizontalAnim.value\n        ? evt.translationX\n        : evt.translationY;\n      touchTranslate.value = translation;\n    })\n    .onEnd((evt) => {\n      if (gestureDisabled.value) return;\n      // Set touch val to current translate val\n      isTouchActiveNative.value = false;\n      const translation = horizontalAnim.value\n        ? evt.translationX\n        : evt.translationY;\n\n      touchTranslate.value = translation + autoScrollDistance.value;\n      panGestureState.value = evt.state;\n\n      // Only call onDragEnd if actually dragging a cell\n      if (activeIndexAnim.value === -1 || disabled.value) return;\n      disabled.value = true;\n      runOnJS(onRelease)(activeIndexAnim.value);\n      const springTo = placeholderOffset.value - activeCellOffset.value;\n      touchTranslate.value = withSpring(\n        springTo,\n        animationConfigRef.current,\n        () => {\n          runOnJS(onDragEnd)({\n            from: activeIndexAnim.value,\n            to: spacerIndexAnim.value,\n          });\n          disabled.value = false;\n        }\n      );\n    })\n    .onTouchesDown(() => {\n      runOnJS(onContainerTouchStart)();\n    })\n    .onTouchesUp(() => {\n      // Turning this into a worklet causes timing issues. We want it to run\n      // just after the finger lifts.\n      runOnJS(onContainerTouchEnd)();\n    });\n\n  if (dragHitSlop) panGesture.hitSlop(dragHitSlop);\n  if (activationDistanceProp) {\n    const activeOffset = [-activationDistanceProp, activationDistanceProp];\n    if (props.horizontal) {\n      panGesture.activeOffsetX(activeOffset);\n    } else {\n      panGesture.activeOffsetY(activeOffset);\n    }\n  }\n\n  const onScroll = useStableCallback((scrollOffset: number) => {\n    props.onScrollOffsetChange?.(scrollOffset);\n  });\n\n  const scrollHandler = useAnimatedScrollHandler(\n    {\n      onScroll: (evt) => {\n        scrollOffset.value = horizontalAnim.value\n          ? evt.contentOffset.x\n          : evt.contentOffset.y;\n        runOnJS(onScroll)(scrollOffset.value);\n      },\n    },\n    [horizontalAnim]\n  );\n\n  useAutoScroll();\n\n  const onViewableItemsChanged = useStableCallback<\n    OnViewableItemsChangedCallback<T>\n  >((info) => {\n    const viewableIndices = info.viewableItems\n      .filter((item) => item.isViewable)\n      .map((item) => item.index)\n      .filter((index): index is number => typeof index === \"number\");\n\n    const min = Math.min(...viewableIndices);\n    const max = Math.max(...viewableIndices);\n    viewableIndexMin.value = min;\n    viewableIndexMax.value = max;\n    props.onViewableItemsChanged?.(info);\n  });\n\n  return (\n    <DraggableFlatListProvider\n      activeKey={activeKey}\n      keyExtractor={keyExtractor}\n      horizontal={!!props.horizontal}\n      layoutAnimationDisabled={layoutAnimationDisabled}\n    >\n      <GestureDetector gesture={panGesture}>\n        <Animated.View\n          style={props.containerStyle}\n          ref={containerRef}\n          onLayout={onContainerLayout}\n        >\n          {props.renderPlaceholder && (\n            <PlaceholderItem renderPlaceholder={props.renderPlaceholder} />\n          )}\n          <AnimatedFlatList\n            {...props}\n            data={props.data}\n            onViewableItemsChanged={onViewableItemsChanged}\n            CellRendererComponent={CellRendererComponent}\n            ref={flatlistRef}\n            onContentSizeChange={onListContentSizeChange}\n            scrollEnabled={!activeKey && scrollEnabled}\n            renderItem={renderItem}\n            extraData={extraData}\n            keyExtractor={keyExtractor}\n            onScroll={scrollHandler}\n            scrollEventThrottle={16}\n            simultaneousHandlers={props.simultaneousHandlers}\n            removeClippedSubviews={false}\n          />\n          {!!props.onScrollOffsetChange && (\n            <ScrollOffsetListener\n              onScrollOffsetChange={props.onScrollOffsetChange}\n              scrollOffset={scrollOffset}\n            />\n          )}\n        </Animated.View>\n      </GestureDetector>\n    </DraggableFlatListProvider>\n  );\n}\n\nfunction DraggableFlatList<T>(\n  props: DraggableFlatListProps<T>,\n  ref?: React.ForwardedRef<FlatList<T>> | null\n) {\n  return (\n    <PropsProvider {...props}>\n      <AnimatedValueProvider>\n        <RefProvider flatListRef={ref}>\n          <MemoizedInner {...props} />\n        </RefProvider>\n      </AnimatedValueProvider>\n    </PropsProvider>\n  );\n}\n\nconst MemoizedInner = typedMemo(DraggableFlatListInner);\n\n// Generic forwarded ref type assertion taken from:\n// https://fettblog.eu/typescript-react-generic-forward-refs/#option-1%3A-type-assertion\nexport default React.forwardRef(DraggableFlatList) as <T>(\n  props: DraggableFlatListProps<T> & { ref?: React.ForwardedRef<FlatList<T>> }\n) => ReturnType<typeof DraggableFlatList>;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}